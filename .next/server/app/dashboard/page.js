(()=>{var e={};e.id=702,e.ids=[702],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},6884:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),t(9668),t(7139),t(5866);var a=t(3191),r=t(8716),n=t(7922),l=t.n(n),i=t(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9668)),"E:\\Reactjs\\real-time-app\\app\\dashboard\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7139)),"E:\\Reactjs\\real-time-app\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\Reactjs\\real-time-app\\app\\dashboard\\page.jsx"],m="/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},416:(e,s,t)=>{Promise.resolve().then(t.bind(t,9043))},9272:(e,s,t)=>{Promise.resolve().then(t.bind(t,7288))},8726:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},9043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(326),r=t(7577),n=t(564),l=t(5047),i=t(381);let o="anon-chat-public";function c(){let e=(0,n.s)(),s=(0,l.useRouter)(),[t,c]=(0,r.useState)("chat"),[d,m]=(0,r.useState)("active"),[u,h]=(0,r.useState)("users"),[x,p]=(0,r.useState)(""),[v,j]=(0,r.useState)("23"),[b,N]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[f,P]=(0,r.useState)([]),[C,S]=(0,r.useState)(null),[k,R]=(0,r.useState)(null),[B,q]=(0,r.useState)([]),[A,I]=(0,r.useState)(""),[T,$]=(0,r.useState)(!1),[E,_]=(0,r.useState)(0),[w,M]=(0,r.useState)(!1);(0,r.useRef)("");let H=(0,r.useMemo)(()=>(x??"").trim(),[x]),Z=(0,r.useMemo)(()=>(v??"").trim(),[v]),D=(0,r.useMemo)(()=>Array.isArray(f)?H?f.filter(e=>e!==H):f:[],[f,H]),L=(0,r.useCallback)(()=>{H&&(localStorage.setItem("rt_username",H),e.emit("user:register",{username:H}),e.emit("users:list"))},[H,e]),O=(0,r.useCallback)(e=>{e.preventDefault(),L()},[L]),[U,G]=(0,r.useState)([]),J=(0,r.useCallback)(e=>{if(e.preventDefault(),!H){i.ZP.error("Enter username first");return}if(!Z){i.ZP.error("Enter room id");return}s.push(`/room/${Z}`)},[s,H,Z]),W=(0,r.useCallback)(s=>{if(!H){i.ZP.error("Enter username first");return}let t=(s??"").trim();if(!t)return;let a=`dm:${[H,t].sort().join("|")}`;S(a),R(t),q([]),m("active"),e.emit("chat:invite",{toEmail:t,room:a}),e.emit("chat:join",{room:a})},[H,e]),V=(0,r.useCallback)(s=>{if(s.preventDefault(),!C)return;let t=(A??"").trim();t&&(e.emit("chat:message",{room:C,message:t}),I(""))},[C,A,e]),F=(0,r.useCallback)(()=>{if(!H){i.ZP.error("Enter username first");return}S(null),R(null),q([]),I(""),m("anon"),S(o),R("Anonymous"),e.emit("chat:join",{room:o})},[H,e]),z=(0,r.useCallback)(()=>{$(!1),S(null),R(null),q([]),I(""),_(0),e.emit("anon:chat:leave")},[e]),X=(0,r.useCallback)(()=>{if(!H){i.ZP.error("Enter username first");return}h("anon"),e.emit("anon:video:find")},[H,e]),K=(0,r.useCallback)(()=>{M(!1),e.emit("anon:video:leave")},[e]),Q=(0,r.useCallback)(t=>{if(!H){i.ZP.error("Enter username first");return}let a=(t??"").trim();if(!a)return;let r=`call-${Date.now()}-${Math.random().toString(16).slice(2,6)}`;e.emit("video:invite",{toEmail:a,room:r}),i.ZP.success("Invite sent"),s.push(`/room/${r}`)},[s,H,e]);return a.jsx("div",{className:"streamInterface",children:H?(0,a.jsxs)("div",{className:"streamContent",children:[(0,a.jsxs)("div",{className:"segmentRow",style:{marginBottom:16},children:[a.jsx("button",{className:`segmentButton ${"chat"===t?"segmentButtonActive":""}`,type:"button",onClick:()=>c("chat"),children:"Chat"}),a.jsx("button",{className:`segmentButton ${"video"===t?"segmentButtonActive":""}`,type:"button",onClick:()=>c("video"),children:"Video"})]}),"chat"===t&&(0,a.jsxs)("div",{className:"panel",children:[a.jsx("div",{className:"panelBody",style:{paddingBottom:8},children:(0,a.jsxs)("div",{className:"segmentRow",style:{margin:0},children:[a.jsx("button",{className:`segmentButton ${"active"===d?"segmentButtonActive":""}`,type:"button",onClick:()=>{$(!1),m("active"),C===o&&(S(null),R(null),q([]),I(""),e.emit("anon:chat:leave"))},children:"Active Users"}),a.jsx("button",{className:`segmentButton ${"anon"===d?"segmentButtonActive":""}`,type:"button",onClick:()=>{$(!1),m("anon"),S(null),R(null),q([]),I("")},children:"Anonymous"})]})}),"active"===d?(0,a.jsxs)("div",{className:"splitPane",style:{minHeight:400},children:[(0,a.jsxs)("div",{className:"listPane",children:[(0,a.jsxs)("div",{className:"listHeader",children:[a.jsx("h3",{className:"listTitle",children:"Active Users"}),a.jsx("button",{className:"buttonSecondary",type:"button",onClick:()=>e.emit("users:list"),children:"Refresh"})]}),a.jsx("div",{className:"userList",children:D.length?D.map(e=>a.jsx("button",{className:`userItem ${k===e?"userItemActive":""}`,type:"button",onClick:()=>W(e),children:e},e)):a.jsx("div",{className:"smallText",children:"No active users yet."})})]}),(0,a.jsxs)("div",{className:"chatPane",children:[(0,a.jsxs)("div",{className:"chatHeader",children:[a.jsx("h3",{className:"chatTitle",children:k?`Chat with ${k}`:"Select a user"}),a.jsx("span",{className:"badge",children:C?"Ready":"Idle"})]}),a.jsx("div",{className:"chatMessages",children:C?B.length?B.map((e,s)=>(0,a.jsxs)("div",{className:`chatBubble ${e.fromId&&e.fromId===g?"chatBubbleMe":""}`,children:[a.jsx("div",{className:"chatMeta",children:e.fromId&&e.fromId===g?"Me":e.from}),a.jsx("div",{children:e.message})]},`${e.at??"x"}-${s}`)):a.jsx("div",{className:"smallText",children:"Say hi"}):a.jsx("div",{className:"smallText",children:"Pick someone from the left."})}),(0,a.jsxs)("form",{className:"chatInputRow",onSubmit:V,children:[a.jsx("input",{className:"input",value:A,onChange:e=>I(e.target.value),placeholder:C?"Type a message...":"Select a user to start",disabled:!C}),a.jsx("button",{className:"buttonPrimary",type:"submit",disabled:!C,children:"Send"})]})]})]}):(0,a.jsxs)("div",{className:"panelBody",children:[(0,a.jsxs)("div",{className:"statusRow",children:[a.jsx("span",{className:"badge",children:C?"Live":"Idle"}),C?(0,a.jsxs)("span",{className:"badge badgeOk",children:["Users: ",E]}):null]}),a.jsx("div",{className:"buttonRow",children:C?a.jsx("button",{className:"buttonSecondary",type:"button",onClick:z,children:"Leave"}):a.jsx("button",{className:"buttonPrimary",type:"button",onClick:F,children:"Join Anonymous Chat"})}),C&&a.jsx("div",{className:"panel",style:{marginTop:14},children:(0,a.jsxs)("div",{className:"chatPane",children:[(0,a.jsxs)("div",{className:"chatHeader",children:[a.jsx("h3",{className:"chatTitle",children:"Anonymous Chat"}),a.jsx("span",{className:"badge badgeOk",children:"Live"})]}),a.jsx("div",{className:"chatMessages",children:B.length?B.map((e,s)=>(0,a.jsxs)("div",{className:`chatBubble ${e.fromId&&e.fromId===g?"chatBubbleMe":""}`,children:[a.jsx("div",{className:"chatMeta",children:e.fromId&&e.fromId===g?"Me":e.from}),a.jsx("div",{children:e.message})]},`${e.at??"x"}-${s}`)):a.jsx("div",{className:"smallText",children:"Say hi"})}),(0,a.jsxs)("form",{className:"chatInputRow",onSubmit:V,children:[a.jsx("input",{className:"input",value:A,onChange:e=>I(e.target.value),placeholder:"Type a message..."}),a.jsx("button",{className:"buttonPrimary",type:"submit",children:"Send"})]})]})})]})]}),"video"===t&&(0,a.jsxs)("div",{className:"panel",children:[a.jsx("div",{className:"panelBody",style:{paddingBottom:8},children:(0,a.jsxs)("div",{className:"segmentRow",style:{margin:0},children:[a.jsx("button",{className:`segmentButton ${"users"===u?"segmentButtonActive":""}`,type:"button",onClick:()=>h("users"),children:"Active Users"}),a.jsx("button",{className:`segmentButton ${"room"===u?"segmentButtonActive":""}`,type:"button",onClick:()=>h("room"),children:"Join Room"}),a.jsx("button",{className:`segmentButton ${"anon"===u?"segmentButtonActive":""}`,type:"button",onClick:()=>h("anon"),children:"Anonymous"})]})}),"users"===u?(0,a.jsxs)("div",{className:"splitPane",style:{minHeight:400},children:[(0,a.jsxs)("div",{className:"listPane",children:[(0,a.jsxs)("div",{className:"listHeader",children:[(0,a.jsxs)("h3",{className:"listTitle",children:["Active Users (",D.length,")"]}),a.jsx("button",{className:"buttonSecondary",type:"button",onClick:()=>e.emit("users:list"),children:"Refresh"})]}),a.jsx("div",{className:"userList",children:D.length?D.map(e=>a.jsx("button",{className:"userItem",type:"button",onClick:()=>Q(e),children:e},e)):a.jsx("div",{className:"smallText",children:"No active users yet."})})]}),(0,a.jsxs)("div",{className:"chatPane",children:[(0,a.jsxs)("div",{className:"chatHeader",children:[a.jsx("h3",{className:"chatTitle",children:"Start a call"}),a.jsx("span",{className:"badge",children:b?"Online":"Offline"})]}),(0,a.jsxs)("div",{className:"chatMessages",children:[a.jsx("div",{className:"smallText",children:"Click a user on the left to send an invite and create a private video room."}),a.jsx("div",{className:"smallText",style:{marginTop:10},children:"If you receive an invite, use the Join button in the popup."})]}),(0,a.jsxs)("div",{className:"chatInputRow",children:[a.jsx("input",{className:"input",disabled:!0,value:"Invites create a unique room automatically."}),a.jsx("button",{className:"buttonSecondary",type:"button",onClick:()=>e.emit("users:list"),children:"Refresh"})]})]})]}):"room"===u?(0,a.jsxs)("div",{className:"panelBody",children:[(0,a.jsxs)("form",{className:"form",onSubmit:J,children:[(0,a.jsxs)("div",{className:"field",children:[a.jsx("label",{className:"label",htmlFor:"room",children:"Room ID"}),a.jsx("input",{id:"room",className:"input",value:v,onChange:e=>j(e.target.value),placeholder:"Enter room ID"})]}),a.jsx("div",{className:"buttonRow",children:a.jsx("button",{className:"buttonPrimary",type:"submit",children:"Join Video Room"})})]}),(0,a.jsxs)("div",{style:{marginTop:16},children:[a.jsx("h3",{className:"listTitle",style:{marginBottom:8},children:"Available Rooms"}),a.jsx("div",{className:"userList",children:U.length?U.map(e=>a.jsx("button",{className:"userItem",type:"button",onClick:()=>{j(e),s.push(`/room/${e}`)},children:e},e)):a.jsx("div",{className:"smallText",children:"No active rooms yet."})})]})]}):(0,a.jsxs)("div",{className:"panelBody",children:[a.jsx("div",{className:"statusRow",children:a.jsx("span",{className:"badge",children:w?"Searching...":"Idle"})}),a.jsx("div",{className:"buttonRow",children:w?a.jsx("button",{className:"buttonSecondary",type:"button",onClick:K,children:"Cancel Search"}):a.jsx("button",{className:"buttonPrimary",type:"button",onClick:X,children:"Start Anonymous Video Call"})}),(0,a.jsxs)("div",{className:"chatMessages",style:{marginTop:16},children:[a.jsx("div",{className:"smallText",children:"Click the button above to start searching for an anonymous video chat partner."}),a.jsx("div",{className:"smallText",style:{marginTop:10},children:"Once matched, you'll be redirected to a private video room."})]})]})]})]}):a.jsx("div",{className:"panel",children:(0,a.jsxs)("div",{className:"panelBody",children:[(0,a.jsxs)("header",{className:"lobbyHeader",children:[a.jsx("h1",{className:"lobbyTitle",children:"Welcome"}),a.jsx("p",{className:"lobbySubtitle",children:"Enter a username to access chat and video features."})]}),(0,a.jsxs)("form",{className:"form",onSubmit:O,children:[(0,a.jsxs)("div",{className:"field",children:[a.jsx("label",{className:"label",htmlFor:"username",children:"Username"}),a.jsx("input",{id:"username",className:"input",value:x,onChange:e=>p(e.target.value),placeholder:"Enter your username"})]}),a.jsx("div",{className:"buttonRow",children:a.jsx("button",{className:"buttonPrimary",type:"submit",disabled:!x.trim(),children:"Continue"})})]})]})})})}function d(){return a.jsx("div",{className:"dashboard",children:a.jsx("div",{className:"dashboard-content",children:a.jsx(c,{})})})}},7288:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(326);t(4047);var r=t(564),n=t(381),l=t(434),i=t(5047);function o({children:e}){let s=(0,i.usePathname)(),t=!(s?.startsWith("/dashboard")||s?.startsWith("/room"));return a.jsx("html",{lang:"en",children:a.jsx("body",{children:(0,a.jsxs)(r.Z,{children:[a.jsx(n.x7,{position:"top-center"}),t?a.jsx("header",{className:"header",children:(0,a.jsxs)("div",{className:"header-content",children:[a.jsx("h1",{className:"logo",children:"My Website"}),(0,a.jsxs)("nav",{className:"nav",children:[a.jsx(l.default,{href:"/",className:"nav-link",children:"Home"}),a.jsx(l.default,{href:"/dashboard",className:"nav-link",children:"Stream"})]})]})}):null,a.jsx("main",{className:"main-content",children:e})]})})})}},564:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o,s:()=>i});var a=t(326),r=t(7577);let n=(0,t(57).io)("",{path:"/api/socket"}),l=(0,r.createContext)(n),i=()=>(0,r.useContext)(l);function o({children:e}){return a.jsx(l.Provider,{value:n,children:e})}},9668:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=t(8570);let r=(0,a.createProxy)(String.raw`E:\Reactjs\real-time-app\app\dashboard\page.jsx`),{__esModule:n,$$typeof:l}=r;r.default;let i=(0,a.createProxy)(String.raw`E:\Reactjs\real-time-app\app\dashboard\page.jsx#default`)},7139:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=t(8570);let r=(0,a.createProxy)(String.raw`E:\Reactjs\real-time-app\app\layout.jsx`),{__esModule:n,$$typeof:l}=r;r.default;let i=(0,a.createProxy)(String.raw`E:\Reactjs\real-time-app\app\layout.jsx#default`)},4047:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[189],()=>t(6884));module.exports=a})();